webpackJsonp([0],{37:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(44),a=n(45),i=!1,o=n(0)(l.a,a.a,!1,function(t){i||n(42)},null,null);o.options.__file="src/pages/detail.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.default=o.exports},42:function(t,e,n){var l=n(43);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);n(6)("21749654",l,!1)},43:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.ivu-table .table-info-row-alive td {\n  background-color: #2db7f5;\n  color: #fff;\n}\n.ivu-table .table-info-row-dead td {\n  background-color: #f60;\n  color: #fff;\n}\n.ivu-table .table-info-row-total td {\n  background-color: #187;\n  color: #fff;\n}\n","",{version:3,sources:["/Users/laihongyu/WebstormProjects/laputa/src/pages/src/pages/detail.vue?de3a35d2"],names:[],mappings:";AACA;EACA,0BAAA;EACA,YAAA;CACA;AAEA;EACA,uBAAA;EACA,YAAA;CACA;AAEA;EACA,uBAAA;EACA,YAAA;CACA",file:"detail.vue",sourcesContent:["<style>\n.ivu-table .table-info-row-alive td {\n  background-color: #2db7f5;\n  color: #fff;\n}\n\n.ivu-table .table-info-row-dead td {\n  background-color: #f60;\n  color: #fff;\n}\n\n.ivu-table .table-info-row-total td {\n  background-color: #187;\n  color: #fff;\n}\n</style>\n<template>\n<div class=\"layout-content-main\">\n  <Row>\n    <Col span=\"24\">\n    <Card>\n      <p slot=\"title\">{{detail.group}} {{analysis}}</p>\n      <Table :columns=\"columns\" :data=\"detail.detail\" :row-class-name=\"rowClassName\"></Table>\n    </Card>\n    </Col>\n  </Row>\n</div>\n</template>\n<script>\nexport default {\n  props: ['_id'],\n  created: async function() {\n    let result = await this.$http.get(`/topic/detail/${this._id}`);\n    let sec=0,min=0,tenMin=0,hour=0,day=0;\n    let count = result.body.detail.length;\n    for (let i in result.body.detail) {\n      if (result.body.detail[i].sec) sec++;\n      if (result.body.detail[i].min) min++;\n      if (result.body.detail[i].tenMin) tenMin++;\n      if (result.body.detail[i].hour) hour++;\n      if (result.body.detail[i].day) day++;\n    }\n    result.body.detail.unshift({\n      alive: true,\n      sec: Math.floor(sec*100/count) + '%',\n      min: Math.floor(min*100/count) + '%',\n      tenMin: Math.floor(tenMin*100/count) + '%',\n      hour: Math.floor(hour*100/count) + '%',\n      day: Math.floor(day*100/count) + '%',\n    });\n    this.detail = result.body;\n  },\n  data() {\n    return {\n      columns: [{\n          title: 'URL',\n          key: 'url',\n          render: (h, params) => {\n            return h('a', {\n              attrs: {\n                href: params.row.url,\n                target: '_blank'\n              }\n            }, [params.row.url]);\n          }\n        },\n        {\n          title: 'createTime',\n          key: 'createTime'\n        },\n        {\n          title: '1秒钟',\n          key: 'sec'\n        },\n        {\n          title: '1分钟',\n          key: 'min'\n        },\n        {\n          title: '10分钟',\n          key: 'tenMin'\n        },\n        {\n          title: '1小时',\n          key: 'hour'\n        },\n        {\n          title: '1天',\n          key: 'day'\n        }\n      ],\n      detail: {}\n    }\n  },\n  computed: {\n    analysis: function() {\n      let count = this.detail.detail.length-1;\n      if (this.detail.detail) {\n        let alive = 0;\n        for (let i in this.detail.detail) {\n          if (this.detail.detail[i].url && this.detail.detail[i].alive) {\n            alive++;\n          }\n        }\n        return `[${alive}/${count}] ${Math.floor(alive*100/count)}%`;\n      } else {\n        return '';\n      }\n    }\n  },\n  methods: {\n    rowClassName(row, index) {\n      if (!!!row.url) {\n        return 'table-info-row-total';\n      }\n      if (row.alive) {\n        return 'table-info-row-alive';\n      }\n      return 'table-info-row-dead';\n    }\n  }\n}\n<\/script>\n"],sourceRoot:""}])},44:function(t,e,n){"use strict";e.a={props:["_id"],created:async function(){let t=await this.$http.get(`/topic/detail/${this._id}`),e=0,n=0,l=0,a=0,i=0,o=t.body.detail.length;for(let o in t.body.detail)t.body.detail[o].sec&&e++,t.body.detail[o].min&&n++,t.body.detail[o].tenMin&&l++,t.body.detail[o].hour&&a++,t.body.detail[o].day&&i++;t.body.detail.unshift({alive:!0,sec:Math.floor(100*e/o)+"%",min:Math.floor(100*n/o)+"%",tenMin:Math.floor(100*l/o)+"%",hour:Math.floor(100*a/o)+"%",day:Math.floor(100*i/o)+"%"}),this.detail=t.body},data:()=>({columns:[{title:"URL",key:"url",render:(t,e)=>t("a",{attrs:{href:e.row.url,target:"_blank"}},[e.row.url])},{title:"createTime",key:"createTime"},{title:"1秒钟",key:"sec"},{title:"1分钟",key:"min"},{title:"10分钟",key:"tenMin"},{title:"1小时",key:"hour"},{title:"1天",key:"day"}],detail:{}}),computed:{analysis:function(){let t=this.detail.detail.length-1;if(this.detail.detail){let e=0;for(let t in this.detail.detail)this.detail.detail[t].url&&this.detail.detail[t].alive&&e++;return`[${e}/${t}] ${Math.floor(100*e/t)}%`}return""}},methods:{rowClassName:(t,e)=>t.url?t.alive?"table-info-row-alive":"table-info-row-dead":"table-info-row-total"}}},45:function(t,e,n){"use strict";var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-content-main"},[n("Row",[n("Col",{attrs:{span:"24"}},[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.detail.group)+" "+t._s(t.analysis))]),t._v(" "),n("Table",{attrs:{columns:t.columns,data:t.detail.detail,"row-class-name":t.rowClassName}})],1)],1)],1)],1)};l._withStripped=!0;var a={render:l,staticRenderFns:[]};e.a=a}});