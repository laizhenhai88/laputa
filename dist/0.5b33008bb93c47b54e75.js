webpackJsonp([0],{57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(66),i=n(67),a=!1,o=n(0)(l.a,i.a,!1,function(e){a||n(64)},null,null);o.options.__file="src/pages/detail.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),t.default=o.exports},64:function(e,t,n){var l=n(65);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);n(5)("21749654",l,!1)},65:function(e,t,n){(e.exports=n(2)(!0)).push([e.i,"\n.ivu-table .table-info-row-alive td {\n  background-color: #2db7f5;\n  color: #fff;\n}\n.ivu-table .table-info-row-dead td {\n  background-color: #f60;\n  color: #fff;\n}\n.ivu-table .table-info-row-total td {\n  background-color: #187;\n  color: #fff;\n}\n","",{version:3,sources:["/Users/laihongyu/WebstormProjects/laputa/src/pages/src/pages/detail.vue?550bc249"],names:[],mappings:";AACA;EACA,0BAAA;EACA,YAAA;CACA;AAEA;EACA,uBAAA;EACA,YAAA;CACA;AAEA;EACA,uBAAA;EACA,YAAA;CACA",file:"detail.vue",sourcesContent:["<style>\n.ivu-table .table-info-row-alive td {\n  background-color: #2db7f5;\n  color: #fff;\n}\n\n.ivu-table .table-info-row-dead td {\n  background-color: #f60;\n  color: #fff;\n}\n\n.ivu-table .table-info-row-total td {\n  background-color: #187;\n  color: #fff;\n}\n</style>\n<template>\n<div class=\"layout-content-main\">\n  <Row>\n    <Col span=\"24\">\n    <Card>\n      <p slot=\"title\">{{detail.group}} {{analysis}}</p>\n      <Table :columns=\"columns\" :data=\"detail.detail\" :row-class-name=\"rowClassName\"></Table>\n    </Card>\n    </Col>\n  </Row>\n</div>\n</template>\n<script>\nexport default {\n  props: ['_id'],\n  created: async function() {\n    let result = await this.$http.get(`/topic/detail/groupId/${this._id}`);\n    let sec=0,min=0,tenMin=0,hour=0,day=0;\n    let count = result.body.detail.length;\n    for (let i in result.body.detail) {\n      if (result.body.detail[i].aliveTime) {\n        result.body.detail[i].keep = '';\n        let offset = (new Date(result.body.detail[i].aliveTime) - new Date(result.body.detail[i].createTime)) / 1000;\n\n        result.body.detail[i].sec = true;\n        if (offset >= 60) result.body.detail[i].min = true;\n        if (offset >= 10*60) result.body.detail[i].tenMin = true;\n        if (offset >= 60*60) result.body.detail[i].hour = true;\n        if (offset >= 24*60*60) result.body.detail[i].day = true;\n\n        if (offset / 60 / 60 > 1) {\n          result.body.detail[i].keep += `${Math.floor(offset / 60 / 60)}小时`;\n        }\n        if (offset / 60 > 1 && Math.floor(offset / 60) % 60 > 0) {\n          result.body.detail[i].keep += `${Math.floor(offset / 60) % 60}分`;\n        }\n        result.body.detail[i].keep += `${Math.floor(offset % 60)}秒`;\n      }\n\n      if (result.body.detail[i].sec) sec++;\n      if (result.body.detail[i].min) min++;\n      if (result.body.detail[i].tenMin) tenMin++;\n      if (result.body.detail[i].hour) hour++;\n      if (result.body.detail[i].day) day++;\n    }\n    result.body.detail.unshift({\n      alive: true,\n      sec: Math.floor(sec*100/count) + '%',\n      min: Math.floor(min*100/count) + '%',\n      tenMin: Math.floor(tenMin*100/count) + '%',\n      hour: Math.floor(hour*100/count) + '%',\n      day: Math.floor(day*100/count) + '%',\n    });\n    this.detail = result.body;\n  },\n  data() {\n    return {\n      columns: [{\n          title: 'URL',\n          key: 'url',\n          render: (h, params) => {\n            return h('a', {\n              attrs: {\n                href: params.row.url,\n                target: '_blank'\n              }\n            }, [params.row.url]);\n          }\n        },\n        {\n          title: '创建时间',\n          key: 'createTime'\n        },\n        {\n          title: '1秒钟',\n          key: 'sec'\n        },\n        {\n          title: '1分钟',\n          key: 'min'\n        },\n        {\n          title: '10分钟',\n          key: 'tenMin'\n        },\n        {\n          title: '留存',\n          key: 'keep'\n        },\n        {\n          title: '阅读',\n          key: 'read'\n        },\n        {\n          title: '点赞',\n          key: 'like'\n        },\n        {\n          title: '评论',\n          key: 'comment'\n        }\n      ],\n      detail: {}\n    }\n  },\n  computed: {\n    analysis: function() {\n      let count = this.detail.detail.length-1;\n      if (this.detail.detail) {\n        let alive = 0;\n        for (let i in this.detail.detail) {\n          if (this.detail.detail[i].url && this.detail.detail[i].alive) {\n            alive++;\n          }\n        }\n        return `[${alive}/${count}] ${Math.floor(alive*100/count)}%`;\n      } else {\n        return '';\n      }\n    }\n  },\n  methods: {\n    rowClassName(row, index) {\n      if (!!!row.url) {\n        return 'table-info-row-total';\n      }\n      if (row.alive) {\n        return 'table-info-row-alive';\n      }\n      return 'table-info-row-dead';\n    }\n  }\n}\n<\/script>\n"],sourceRoot:""}])},66:function(e,t,n){"use strict";t.a={props:["_id"],created:async function(){let e=await this.$http.get(`/topic/detail/groupId/${this._id}`),t=0,n=0,l=0,i=0,a=0,o=e.body.detail.length;for(let o in e.body.detail){if(e.body.detail[o].aliveTime){e.body.detail[o].keep="";let t=(new Date(e.body.detail[o].aliveTime)-new Date(e.body.detail[o].createTime))/1e3;e.body.detail[o].sec=!0,t>=60&&(e.body.detail[o].min=!0),t>=600&&(e.body.detail[o].tenMin=!0),t>=3600&&(e.body.detail[o].hour=!0),t>=86400&&(e.body.detail[o].day=!0),t/60/60>1&&(e.body.detail[o].keep+=`${Math.floor(t/60/60)}小时`),t/60>1&&Math.floor(t/60)%60>0&&(e.body.detail[o].keep+=`${Math.floor(t/60)%60}分`),e.body.detail[o].keep+=`${Math.floor(t%60)}秒`}e.body.detail[o].sec&&t++,e.body.detail[o].min&&n++,e.body.detail[o].tenMin&&l++,e.body.detail[o].hour&&i++,e.body.detail[o].day&&a++}e.body.detail.unshift({alive:!0,sec:Math.floor(100*t/o)+"%",min:Math.floor(100*n/o)+"%",tenMin:Math.floor(100*l/o)+"%",hour:Math.floor(100*i/o)+"%",day:Math.floor(100*a/o)+"%"}),this.detail=e.body},data:()=>({columns:[{title:"URL",key:"url",render:(e,t)=>e("a",{attrs:{href:t.row.url,target:"_blank"}},[t.row.url])},{title:"创建时间",key:"createTime"},{title:"1秒钟",key:"sec"},{title:"1分钟",key:"min"},{title:"10分钟",key:"tenMin"},{title:"留存",key:"keep"},{title:"阅读",key:"read"},{title:"点赞",key:"like"},{title:"评论",key:"comment"}],detail:{}}),computed:{analysis:function(){let e=this.detail.detail.length-1;if(this.detail.detail){let t=0;for(let e in this.detail.detail)this.detail.detail[e].url&&this.detail.detail[e].alive&&t++;return`[${t}/${e}] ${Math.floor(100*t/e)}%`}return""}},methods:{rowClassName:(e,t)=>e.url?e.alive?"table-info-row-alive":"table-info-row-dead":"table-info-row-total"}}},67:function(e,t,n){"use strict";var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout-content-main"},[n("Row",[n("Col",{attrs:{span:"24"}},[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.detail.group)+" "+e._s(e.analysis))]),e._v(" "),n("Table",{attrs:{columns:e.columns,data:e.detail.detail,"row-class-name":e.rowClassName}})],1)],1)],1)],1)};l._withStripped=!0;var i={render:l,staticRenderFns:[]};t.a=i}});